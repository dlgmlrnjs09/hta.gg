---------- drop sequence -------------
drop SEQUENCE msgNum_seq;
drop SEQUENCE tNum_seq;
drop SEQUENCE mNum_seq;
drop SEQUENCE bNum_seq; --諛고똿踰덊샇
drop SEQUENCE sNum_seq;
drop SEQUENCE fileNum_seq;
drop SEQUENCE rNum_seq; --�떊怨좊쾲�샇
drop SEQUENCE reNum_seq; --�뙎湲�踰덊샇
drop SEQUENCE pNum_seq;
drop SEQUENCE tmNum_seq;
drop SEQUENCE iNum_seq;
drop SEQUENCE banNum_seq;	--諛� 踰덊샇

---------- drop table ---------- 
drop table visitLog;
drop table authorities;
drop table message;

drop table battingLog;
drop table match;
drop table battingTeamInfo;
drop table rating;
drop table reply;
drop table Addfile;
drop table report;
drop table community;
drop table persistent_logins;
drop table member;
drop table auth;
drop table banList;
drop table teamMemberinfo;
drop table teaminfo;
drop table matchinfo;
drop table queueinfo;
drop table Summoner;
drop table champion;
drop table item;


-- �젒�냽 湲곕줉/visitLog
create table visitLog
(
	vDate date not null
);

create table summoner
(
	sNickname varchar2(255)PRIMARY KEY,	--�냼�솚�궗 �씠由�
	sLevel number,	--�냼�솚�궗 �젅踰�
	icon varchar2(255)	--�봽濡쒗븘�븘�씠肄�
);

CREATE TABLE queueinfo
(
	snickname varchar2(255) references summoner,
	queueType varchar2(30) ,
	tier varchar2(15),
	leaguePoints number,
	win number,
	lose number,
	PRIMARY KEY (snickname, queueType)
);

-- �씠硫붿씪 �씤利앸쾲�샇/auth
create table auth
(
	username varchar2(50) primary key,	--�븘�씠�뵒
	code varchar2(1000)	--�씠硫붿씪 �씤利앸쾲�샇
);

-- �쉶�썝/MEMBER
create table member
(
	username varchar2(50) NOT NULL enable,	--�븘�씠�뵒
	snickname varchar2(255) references summoner,	--�냼�솚�궗踰덊샇
	password varchar2(100) not null,	--鍮꾨�踰덊샇
	ENABLED NUMBER(1) NOT NULL,	--enable(�궗�슜媛��뒫)
	email varchar2(50),	-- �씠硫붿씪
	regdate date,	--媛��엯�궇吏�
	nickname varchar2(12),	--而ㅻ�ㅻ땲�떚 �땳�꽕�엫
	point number,	--�룷�씤�듃
    CONSTRAINT "member_PK" PRIMARY KEY ("USERNAME"),
    CONSTRAINT "member_FK1" FOREIGN KEY ("USERNAME") REFERENCES "FINAL"."AUTH" ("USERNAME")
);

CREATE TABLE persistent_logins 
(
  series varchar(64) primary key,
  username varchar(50) references member(username),
  token varchar(64) DEFAULT NULL,
  last_used timestamp not null
);

-- �봽濡쒗븘 �룊媛�(rating)
create table rating
(
	snickname varchar2(255) references summoner,
	rate varchar2(100) 
);

-- 履쎌�/message
create table message
(
	msgNum number primary key,	--履쎌� 踰덊샇
	sender varchar2(50) references member(username),	--蹂대궦 �궗�엺 �븘�씠�뵒
	receiver varchar2(50) references member(username),	--諛쏅뒗 �궗�엺 �븘�씠�뵒
	msg varchar2(4000),		--硫붿꽭吏� �궡�슜
	sendTime date,		--蹂대궦 �떆媛�
	open varchar2(255) --�솗�씤�뿬遺�
);

-- 沅뚰븳/authorities
create table authorities
(
	username varchar2(50) not null,	--�븘�씠�뵒
	authority varchar2(100) not null, --沅뚰븳
	constraint fk_authorities_users  foreign key(username) references member(username)
);
create unique index ix_auth_username on authorities (username,authority);	

-- ���젙蹂�/battingTeamInfo
create table battingTeamInfo
(
	tNum number primary key,	--�� 踰덊샇
	tName varchar2(255)	--�� �씠由�
);
-- 寃쎄린 �씪�젙/match
create table match
(
	mNum number primary key,	--寃쎄린 踰덊샇
	mDate date,	--寃쎄린 �떆媛�
	mRate number,	--諛곕떦�쑉
	mWinlose number,	--�듅�뙣�뿬遺�
    tNum1 number references battingTeamInfo(tnum) not null,
    tNum2 number references battingTeamInfo(tnum) not null
);


-- 諛고똿�궡�뿭/battingLog
create table battingLog
(
	bNum number primary key,	--諛고똿�궡�뿭 踰덊샇
	mNum number references match(mNum) not null,	--寃쎄린 踰덊샇
	username varchar2(50) references member(username) not null,	--�븘�씠�뵒
	choice number	--諛고똿�븳 ��
);

-- 寃뚯떆�뙋/community
create table community
(
	pNum number primary key,	--寃뚯떆湲� 踰덊샇
	username varchar2(50) references member(username) not null,	--�븘�씠�뵒
	cNum number not null,	--移댄뀒怨좊━
	title varchar2(255),	--湲� �젣紐�
	content varchar2(4000),	--湲� �궡�슜
	hit number,		--異붿쿇�닔
	nohit number,	--諛섎��닔
	viewCount number,	--議고쉶�닔
	commentCount number, --�뙎湲��닔
	regdate date -- �벑濡앸궇吏�
);

-- �떊怨�/report
create table report
(
	rNum number primary key, --�떊怨좊쾲�샇
	pNum number references community(pNum) not null,	--寃뚯떆湲� 踰덊샇
	detail varchar2(4000)	--�떊怨좊궡�슜
);

-- 泥⑤��뙆�씪/Addfile
create table Addfile
(
	fileNum number primary key,	--泥⑤��뙆�씪 踰덊샇
	pNum number references community(pNum) not null,	--寃뚯떆湲� 踰덊샇
	orgPath varchar2(2000),	--�썝蹂명뙆�씪寃쎈줈
	realPath varchar2(1000)	--���옣�뙆�씪紐�
);

-- �뙎湲�/reply
create table reply
(
	rNum number primary key,	--�뙎湲� 踰덊샇
	pNum number references community(pNum) on delete cascade not null,	--寃뚯떆湲� 踰덊샇
	rereNum number,	--���뙎湲� 踰덊샇
	rWriter varchar2(255),	--�뙎湲��옉�꽦�옄
	rContent varchar2(255),	--�뙎湲��궡�슜
	regdate date --�뙎湲� �옉�꽦�궇吏�
);

--�븘�씠�뀥/item
create table item
(
	iNum number primary key,	--�븘�씠�뀥 踰덊샇
	icon varchar2(255),	--�븘�씠�뀥 �븘�씠肄�
	name varchar2(255),	--�븘�씠�뀥�씠由�
	price number,	--�븘�씠�뀥 媛�寃�
	effect varchar2(4000),	--�븘�씠�뀥�슚怨�
	tags varchar2(100)
);

--梨뷀뵾�뼵/champion
create table champion
(
	championid varchar2(255) primary key,	--梨뷀뵾�뼵id
	name varchar2(255),	--梨뷀뵾�뼵 �씠由�
	pickCount number,	--�뵿�맂 �슏�닔
	banCount number,	--諛대맂 �슏�닔
	winCount number,	--�듅由� �슏�닔
	loseCount number,	--�뙣諛� �슏�닔
	picture varchar2(255),	--珥덉긽�솕
	skillP_icon varchar2(255),	--�뙣�떆釉� �뒪�궗 �븘�씠肄�
	skillP_info varchar2(4000),	--�뙣�떆釉� �뒪�궗 �꽕紐�
	skillQ_icon varchar2(255),	--q�뒪�궗 �븘�씠肄�
	skillQ_info varchar2(4000),	--q�뒪�궗 �꽕紐�
	skillW_icon varchar2(255),	--W�뒪�궗 �븘�씠肄�
	skillW_info varchar2(4000),	--W�뒪�궗 �꽕紐�
	skillE_icon varchar2(255),	--E�뒪�궗 �븘�씠肄�
	skillE_info varchar2(4000),	--E�뒪�궗 �꽕紐�
	skillR_icon varchar2(255),	--r�뒪�궗 �븘�씠肄�
	skillR_info varchar2(4000),	--r�뒪�궗 �꽕紐�
	story varchar2(4000),	--�뒪�넗由�
	tip varchar2(4000)	--�똻
);

-- �쟾泥� 寃뚯엫�젙蹂�/matchinfo
create table matchinfo
(
	matchid varchar2(255) primary key,	--寃쎄린怨좎쑀 id
	type varchar2(255),	--寃뚯엫 ���엯
	runtime varchar2(255),	--寃뚯엫 吏꾪뻾�떆媛�
	startTime date	--寃뚯엫 �떆�옉�떆媛�
);

-- ���젙蹂�/teaminfo
CREATE TABLE "TEAMINFO" 
(   
	"TEAMID" VARCHAR2(255 BYTE) NOT NULL ENABLE, --�� id
    "MATCHID" VARCHAR2(255 BYTE) NOT NULL ENABLE, --寃쎄린 怨좎쑀 id
    "WINLOSE" VARCHAR2(255 BYTE), --�듅�뙣�뿬遺�
    "FIRSTBLOOD" VARCHAR2(255 BYTE), --�띁�뒪�듃釉붾윭�뱶
    "FIRSTTOWER" VARCHAR2(255 BYTE), --�띁�뒪�듃���썙
    "BARONKILL" NUMBER, --諛붾줎 �궗
    "DRAGONKILL" NUMBER, --�뱶�옒怨� �궗
    "TOWERKILL" NUMBER, --�룷�깙 �궗
    CONSTRAINT "TEAMINFO_PK" PRIMARY KEY ("TEAMID", "MATCHID"),
    CONSTRAINT "TEAMINFO_FK1" FOREIGN KEY ("MATCHID") REFERENCES "FINAL"."MATCHINFO" ("MATCHID")
);

--���썝 �젙蹂�/teamMemberinfo
CREATE TABLE TEAMMEMBERINFO
(   
	"TMNUM" NUMBER, 
    snickname varchar2(255) references summoner,
    "TEAMID" VARCHAR2(255 BYTE), 
    "MATCHID" VARCHAR2(2555 BYTE), 
    "CHAMPIONID" VARCHAR2(255 BYTE), 
    "KILL" NUMBER, 
    "DEATH" NUMBER, 
    "ASSIST" NUMBER, 
    "CHAMPIONLEVEL" NUMBER, 
    "SPELL1" NUMBER, 
    "SPELL2" NUMBER, 
    "RUNE1" NUMBER, 
    "RUNE2" NUMBER, 
    "CHAMPIONDAMAGE" NUMBER, 
    "TAKENDAMAGE" NUMBER, 
    "CS" NUMBER, 
    "WARDINSTALL" NUMBER, 
    "WARDREMOVE" NUMBER, 
    "GOLD" NUMBER, 
    "ITEM1" NUMBER, 
    "ITEM2" NUMBER, 
    "ITEM3" NUMBER, 
    "ITEM4" NUMBER, 
    "ITEM5" NUMBER, 
    "ITEM6" NUMBER, 
    "ACCESSORY" NUMBER, 
    "MULTIKILL" NUMBER, 
    PRIMARY KEY ("TMNUM"),
    CONSTRAINT "TEAMMEMBERINFO_FK2" FOREIGN KEY ("TEAMID", "MATCHID")
    REFERENCES "FINAL"."TEAMINFO" ("TEAMID", "MATCHID") ENABLE, 
    CONSTRAINT "TEAMMEMBERINFO_FK3" FOREIGN KEY ("CHAMPIONID")
    REFERENCES "FINAL"."CHAMPION" ("CHAMPIONID") ENABLE, 
    CONSTRAINT "TEAMMEMBERINFO_FK4" FOREIGN KEY ("ITEM1")
    REFERENCES "FINAL"."ITEM" ("INUM") ENABLE, 
    CONSTRAINT "TEAMMEMBERINFO_FK5" FOREIGN KEY ("ITEM2")
    REFERENCES "FINAL"."ITEM" ("INUM") ENABLE, 
    CONSTRAINT "TEAMMEMBERINFO_FK6" FOREIGN KEY ("ITEM3")
    REFERENCES "FINAL"."ITEM" ("INUM") ENABLE, 
    CONSTRAINT "TEAMMEMBERINFO_FK7" FOREIGN KEY ("ITEM4")
    REFERENCES "FINAL"."ITEM" ("INUM") ENABLE, 
    CONSTRAINT "TEAMMEMBERINFO_FK8" FOREIGN KEY ("ITEM5")
    REFERENCES "FINAL"."ITEM" ("INUM") ENABLE, 
    CONSTRAINT "TEAMMEMBERINFO_FK9" FOREIGN KEY ("ITEM6")
    REFERENCES "FINAL"."ITEM" ("INUM") ENABLE
);

--諛댄뵿紐⑸줉/banList
create table banList
(
	bNum number primary key,
	championid	varchar2(255) references champion(championid)
);

---------- create sequence -----------
create SEQUENCE msgNum_seq;
create SEQUENCE tNum_seq;
create SEQUENCE mNum_seq;
create SEQUENCE bNum_seq; --諛고똿踰덊샇
create SEQUENCE sNum_seq;
create SEQUENCE fileNum_seq;
create SEQUENCE rNum_seq; --�떊怨좊쾲�샇
create SEQUENCE reNum_seq; --�뙎湲�踰덊샇
create SEQUENCE pNum_seq;
create SEQUENCE tmNum_seq;
create SEQUENCE iNum_seq;
create SEQUENCE banNum_seq;	--諛� 踰덊샇


------------컬럼명 바꾸기 --------------------------------
alter table member rename column enable to enabled;